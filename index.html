<!doctype html><html lang="en"><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Kranker Â· Atlas Viewer</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
<link rel="stylesheet" href="./assets/app.css">
<body>
<header>
  <div class="brand">ðŸŸ¡ kranker Â· atlas</div>
  <input id="base" value="https://jimage3.github.io/canon-core">
  <button id="load">Load</button>
</header>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const $=s=>document.querySelector(s);
const map=L.map('map',{zoomControl:true}).setView([0,0],2);
L.tileLayer(document.getElementById("map").style.background = "#0e0e10";).addTo(map);
const layers={};
function addLayer(name,geo){ if(layers[name]) map.removeLayer(layers[name]);
  layers[name]=L.geoJSON(geo,{style:{color:'#ffd54a',weight:1,fillOpacity:0.15}}).addTo(map); }
async function fetchJSON(u){ const r=await fetch(u); if(!r.ok) throw new Error(u); return r.json(); }
async function load(){
  const base=$('#base').value.replace(/\/$/,'');
  const loka=await fetchJSON(`${base}/master/atlases/worlds/loka.geojson`);
  const drav=await fetchJSON(`${base}/master/atlases/continents/dravon.geojson`);
  const lart=await fetchJSON(`${base}/master/atlases/countries/lart.geojson`);
  const ram =await fetchJSON(`${base}/master/atlases/cities/ramal.geojson`);
  addLayer('loka',loka); addLayer('dravon',drav); addLayer('lart',lart); addLayer('ramal',ram);
  map.fitBounds(layers['ramal'].getBounds());
}
$('#load').addEventListener('click',load);
</script>
</body></html>
